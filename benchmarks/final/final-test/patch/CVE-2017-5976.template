 236 | /* find an extra block for the given datatype code.
 237 |  * We assume that the central directory has been preparsed to memory.
 238 |  */
 239 | ZZIP_EXTRA_BLOCK *
 240 | zzip_mem_entry_extra_block(ZZIP_MEM_ENTRY * entry, short datatype)
 241 | {
 242 |     int i = 2;
 243 |     while (1)
 244 |     {
 245 |         ZZIP_EXTRA_BLOCK *ext = entry->zz_ext[i];
 246 |         if (ext)
 247 |         { // PATCH LOCATION
 248 |             while (*(short *) (ext->z_datatype))
 249 |             {
 250 |                 if (datatype == zzip_extra_block_get_datatype(ext))
 251 |                 {
 252 |                     return ext;
 253 |                 }
 254 |                 ___ char *e = (char *) ext;
 255 |                 e += zzip_extra_block_headerlength;
 256 |                 e += zzip_extra_block_get_datasize(ext);
 257 |                 ext = (void *) e;
 258 |                 ____;
 259 |             }
 260 |         }
 261 |         if (! i)
 262 |             return 0;
 263 |         i--;
 264 |     }
 265 | }
