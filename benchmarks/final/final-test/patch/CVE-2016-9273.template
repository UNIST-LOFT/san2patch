  57 | /*
  58 |  * Compute how many strips are in an image.
  59 |  */
  60 | uint32
  61 | TIFFNumberOfStrips(TIFF* tif)
  62 | {
  63 | 	TIFFDirectory *td = &tif->tif_dir;
  64 | 	uint32 nstrips; // PATCH LOCATION
  65 | 
  66 | 	nstrips = (td->td_rowsperstrip == (uint32) -1 ? 1 :
  67 | 	     TIFFhowmany_32(td->td_imagelength, td->td_rowsperstrip));
  68 | 	if (td->td_planarconfig == PLANARCONFIG_SEPARATE)
  69 | 		nstrips = _TIFFMultiply32(tif, nstrips, (uint32)td->td_samplesperpixel,
  70 | 		    "TIFFNumberOfStrips");
  71 | 	return (nstrips);
  72 | }
  73 | 
