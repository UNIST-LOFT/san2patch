From b0d2b3e57d44ff27e33d61964d268c7475153c42 Mon Sep 17 00:00:00 2001
From: Camsyn <2742046922@qq.com>
Date: Fri, 21 Jun 2024 06:57:43 +0000
Subject: [PATCH] [fix](lou_checkyaml): fix issue #1534     check the overflow
 in string copy, just behave as     `strncpy(file.line, inString, MAXSTRING)`

---
 liblouis/compileTranslationTable.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/liblouis/compileTranslationTable.c b/liblouis/compileTranslationTable.c
index e8979bb4..339edd3e 100644
--- a/liblouis/compileTranslationTable.c
+++ b/liblouis/compileTranslationTable.c
@@ -4568,7 +4568,7 @@ compileString(const char *inString, TranslationTableHeader **table,
 	file.lineNumber = 1;
 	file.status = 0;
 	file.linepos = 0;
-	for (k = 0; inString[k]; k++) file.line[k] = inString[k];
+	for (k = 0; k < MAXSTRING - 1 && inString[k]; k++) file.line[k] = inString[k];
 	file.line[k] = 0;
 	file.linelen = k;
 	if (table && *table && (*table)->finalized) {
-- 
2.17.1

